"use strict";(globalThis["webpackChunkastral"]=globalThis["webpackChunkastral"]||[]).push([[499],{52801:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Ee});t(40702);var l=t(59835),s=t(86970),n=t(61957);const i=e=>((0,l.dD)("data-v-b1ed1000"),e=e(),(0,l.Cn)(),e),o={key:0,class:"flex justify-between",style:{display:"flex",gap:".2rem"}},r={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1.1rem"}},d={class:"flex row no-wrap",style:{gap:"1rem"}},c={class:"section"},u={key:0,class:"flex justify-between",style:{display:"flex",gap:".2rem"}},m={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1.1rem"}},p={class:"text-normal flex row no-wrap",style:{"font-size":".9rem",gap:".4rem"}},y={key:1},h={key:2},g={class:"flex no-wrap items-center",style:{gap:".6rem"}},f={class:"flex row no-wrap q-mx-sm q-mt-sm",id:"new-relay-input"},b={style:{"max-height":"6.75rem"}},w={class:"relay-list"},k=(0,l.Uk)("              "),v=["onClick"],S=(0,l.Uk)("\n                "),C={class:"flex row justify-between no-wrap"},x=(0,l.Uk)("\n                  "),P={style:{overflow:"auto"}},R=(0,l.Uk)("\n                  "),_=(0,l.Uk)("\n                "),T=(0,l.Uk)("\n              "),q=(0,l.Uk)("\n            "),M={class:"text-bold flex justify-between no-wrap full-width",style:{"font-size":"1.1rem"}},U={class:"flex no-wrap section",style:{gap:".2rem"}},A={class:"text-lg text-bold tracking-wide leading-relaxed py-2"},$=(0,l.Uk)(" Your keys "),V={key:0},W={key:1},z=i((()=>(0,l._)("div",{class:"mt-1 text-xs"}," Posts are published using your private key. Others can see your posts or follow you using only your public key. ",-1))),D=i((()=>(0,l._)("p",null,"Private Key:",-1))),L=i((()=>(0,l._)("p",null,"Public Key:",-1)));function j(e,a,t,i,j,O){const N=(0,l.up)("BaseHeader"),Z=(0,l.up)("q-btn"),F=(0,l.up)("q-icon"),B=(0,l.up)("q-input"),I=(0,l.up)("BaseUserAvatar"),K=(0,l.up)("q-form"),Q=(0,l.up)("q-separator"),H=(0,l.up)("ThePreferences"),Y=(0,l.up)("q-toggle"),E=(0,l.up)("q-item"),G=(0,l.up)("q-list"),J=(0,l.up)("BaseSelectMultiple"),X=(0,l.up)("BaseInformation"),ee=(0,l.up)("q-card-section"),ae=(0,l.up)("q-expansion-item"),te=(0,l.up)("q-card-actions"),le=(0,l.up)("q-card"),se=(0,l.up)("q-dialog"),ne=(0,l.up)("q-page"),ie=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(ne,{id:"settings-page"},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("settings")),1)])),_:1}),(0,l.Wm)(K,{class:"q-gutter-md section",onSubmit:O.setMetadata},{default:(0,l.w5)((()=>[j.editingMetadata?((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(Z,{label:"save",color:"primary",outline:"",size:"sm",type:"submit"}),(0,l.Wm)(Z,{label:"cancel",color:"negative",outline:"",size:"sm",onClick:a[0]||(a[0]=e=>O.cancel("metadata"))})])):(0,l.kq)("",!0),(0,l._)("div",r,[(0,l.Uk)((0,s.zw)(e.$t("profile"))+" ",1),j.editingMetadata?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(Z,{key:0,label:"edit",color:"primary",outline:"",size:"sm",disable:!e.$store.getters.canSignEventsAutomatically,onClick:a[1]||(a[1]=e=>j.editingMetadata=!0)},null,8,["disable"]))]),(0,l.Wm)(B,{modelValue:j.metadata.name,"onUpdate:modelValue":a[2]||(a[2]=e=>j.metadata.name=e),dense:"",filled:"",type:"text",label:"Name",disable:!j.editingMetadata},{before:(0,l.w5)((()=>[(0,l.Wm)(F,{name:"alternate_email"})])),_:1},8,["modelValue","disable"]),(0,l.Wm)(B,{modelValue:j.metadata.about,"onUpdate:modelValue":a[3]||(a[3]=e=>j.metadata.about=e),disable:!j.editingMetadata,filled:"",autogrow:"",dense:"",type:"text",label:"About (in 150 chars)",maxlength:"300"},null,8,["modelValue","disable"]),(0,l.Wm)(B,{modelValue:j.metadata.picture,"onUpdate:modelValue":a[4]||(a[4]=e=>j.metadata.picture=e),modelModifiers:{trim:!0},disable:!j.editingMetadata,filled:"",dense:"",type:"text",label:"Picture URL",maxlength:"150"},{after:(0,l.w5)((()=>[j.metadata.picture?((0,l.wg)(),(0,l.j4)(I,{key:0,pubkey:e.$store.state.keys.pub,rounded:""},null,8,["pubkey"])):(0,l.kq)("",!0)])),_:1},8,["modelValue","disable"]),(0,l.Wm)(B,{modelValue:j.metadata.nip05,"onUpdate:modelValue":a[5]||(a[5]=e=>j.metadata.nip05=e),modelModifiers:{trim:!0},disable:!j.editingMetadata,filled:"",dense:"",type:"text",label:"NIP-05 Identifier",maxlength:"100"},null,8,["modelValue","disable"]),(0,l._)("div",d,[(0,l.Wm)(B,{modelValue:j.metadata.lud06,"onUpdate:modelValue":a[6]||(a[6]=e=>j.metadata.lud06=e),modelModifiers:{trim:!0},disable:!j.editingMetadata,filled:"",dense:"",type:"text",label:"Lightning Address or LUD-06 Identifier",maxlength:"150",class:"full-width"},null,8,["modelValue","disable"]),O.hasLnAddr?((0,l.wg)(),(0,l.j4)(Z,{key:0,label:j.showLnAddr?"show lnurl":"show ln address",onClick:O.convertLud06,outline:"",dense:"","no-wrap":""},null,8,["label","onClick"])):(0,l.kq)("",!0)])])),_:1},8,["onSubmit"]),(0,l.Wm)(Q,{color:"accent"}),(0,l.Wm)(H,{onUpdateFont:O.updateFont},null,8,["onUpdateFont"]),(0,l.Wm)(Q,{color:"accent"}),(0,l._)("div",c,[j.editingRelays?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(Z,{label:"save",color:"primary",outline:"",size:"sm",onClick:O.saveRelays},null,8,["onClick"]),(0,l.Wm)(Z,{label:"cancel",color:"negative",outline:"",size:"sm",onClick:a[7]||(a[7]=e=>O.cancel("relays"))})])):(0,l.kq)("",!0),(0,l._)("div",m,[(0,l.Uk)((0,s.zw)(e.$t("relays"))+" ",1),(0,l._)("div",p,[j.editingRelays?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(Z,{key:0,label:"edit",color:"primary",outline:"",size:"sm",disable:!e.$store.getters.canSignEventsAutomatically,onClick:a[8]||(a[8]=e=>j.editingRelays=!0)},null,8,["disable"])),j.editingRelays?((0,l.wg)(),(0,l.iD)("div",y,"read")):(0,l.kq)("",!0),j.editingRelays?((0,l.wg)(),(0,l.iD)("div",h,"write")):(0,l.kq)("",!0)])]),(0,l.Wm)(G,{class:"flex column q-pt-xs",style:{gap:".2rem"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(j.relays),(a=>((0,l.wg)(),(0,l.j4)(E,{key:a,class:"flex justify-between items-center no-wrap no-padding",style:{"min-height":"1.2rem"}},{default:(0,l.w5)((()=>[(0,l._)("div",null,[j.editingRelays||!j.relays[a].read&&!j.relays[a].write?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(Z,{key:0,color:"secondary",outline:"",size:"sm",label:"Share",disable:j.hasJustSharedRelay||!e.$store.getters.canSignEventsAutomatically,onClick:e=>O.shareRelay(a)},null,8,["disable","onClick"])),j.editingRelays?((0,l.wg)(),(0,l.j4)(Z,{key:1,color:"negative",label:"remove",outline:"",size:"sm",onClick:e=>O.removeRelay(a)},null,8,["onClick"])):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,s.zw)(a),1)]),(0,l._)("div",g,[j.editingRelays?((0,l.wg)(),(0,l.j4)(Y,{key:0,modelValue:j.relays[a].read,"onUpdate:modelValue":e=>j.relays[a].read=e,color:"primary",size:"sm",dense:"",class:"no-padding",disable:!e.$store.getters.canSignEventsAutomatically},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,l.kq)("",!0),j.editingRelays?((0,l.wg)(),(0,l.j4)(Y,{key:1,modelValue:j.relays[a].write,"onUpdate:modelValue":e=>j.relays[a].write=e,color:"primary",size:"sm",dense:"",class:"no-padding",disable:!e.$store.getters.canSignEventsAutomatically},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,l.kq)("",!0)])])),_:2},1024)))),128))])),_:1}),j.editingRelays?((0,l.wg)(),(0,l.j4)(K,{key:1,class:"q-py-xs",onSubmit:O.addRelay},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.Wm)(B,{modelValue:j.newRelay,"onUpdate:modelValue":a[9]||(a[9]=e=>j.newRelay=e),placeholder:"add a relay...",autofocus:"",class:"full-width","input-style":"padding: 0;",onKeypress:(0,n.D2)(O.addRelay,["enter"]),dense:"",borderless:""},null,8,["modelValue","onKeypress"]),(0,l.Wm)(Z,{icon:"add",color:"positive",size:"sm",flat:"",dense:"",onClick:(0,n.iM)(O.addRelay,["stop"])},null,8,["onClick"])]),(0,l.Wm)(J,null,{options:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l._)("pre",w,[k,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(O.optionalRelays,((e,a)=>((0,l.wg)(),(0,l.iD)("li",{key:a+"-"+e,class:"relay-item",onClick:(0,n.iM)((a=>j.relays[e]={read:!0,write:!0}),["stop"])},[S,(0,l._)("div",C,[x,(0,l._)("span",P,(0,s.zw)(e),1),R,(0,l.Wm)(F,{name:"add",size:"xs",color:"positive",flat:""}),_]),T],8,v)))),128)),q])])])),_:1})])),_:1},8,["onSubmit"])):(0,l.kq)("",!0)]),(0,l.Wm)(Q,{color:"accent"}),(0,l.Wm)(ae,{dense:"","expand-icon":"help","expanded-icon":"expand_less",class:"full-width items-center","header-class":"items-center"},{header:(0,l.w5)((()=>[(0,l._)("div",M,(0,s.zw)(e.$t("faq")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X)])),_:1})])),_:1}),(0,l.Wm)(Q,{color:"accent"}),(0,l._)("div",U,[(0,l.Wm)(Z,{label:"View your keys",color:"primary",outline:"",onClick:a[10]||(a[10]=e=>j.keysDialog=!0)}),(0,l.Wm)(Z,{label:"logout",color:"primary",outline:"",onClick:O.logout},null,8,["onClick"]),(0,l.Wm)(Z,{label:"Delete Local Data",color:"negative",outline:"",onClick:O.hardReset},null,8,["onClick"]),(0,l.Wm)(Z,{label:"dev tools",color:"secondary",outline:"",to:{name:"devTools"}})]),(0,l.Wm)(se,{modelValue:j.keysDialog,"onUpdate:modelValue":a[13]||(a[13]=e=>j.keysDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"px-4 py-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[(0,l._)("div",A,[$,(0,l.Wm)(F,{name:"vpn_key"})]),e.$store.state.keys.priv?((0,l.wg)(),(0,l.iD)("p",V,"Make sure you back up your private key!")):((0,l.wg)(),(0,l.iD)("p",W,"Your private key is not here!")),z])),_:1}),(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[D,(0,l.Wm)(B,{modelValue:O.nsecKey,"onUpdate:modelValue":a[11]||(a[11]=e=>O.nsecKey=e),class:"mb-2",readonly:"",filled:""},null,8,["modelValue"]),L,(0,l.Wm)(B,{modelValue:O.npubKey,"onUpdate:modelValue":a[12]||(a[12]=e=>O.npubKey=e),readonly:"",filled:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(te,{align:"right",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Z,{outline:"",label:"Close"},null,512),[[ie]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}t(46727);var O=t(63703),N=t(74827),Z=t(18933),F=t(34136),B=t(67903),I=t(33353);const K=e=>((0,l.dD)("data-v-7c4eea2f"),e=e(),(0,l.Cn)(),e),Q={key:0},H={key:0,class:"flex justify-between",style:{display:"flex",gap:".2rem"}},Y={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1.1rem"}},E={class:"text-normal flex row no-wrap",style:{"font-size":".9rem",gap:".4rem"}},G={class:"flex column q-px-sm",style:{gap:".3rem"}},J={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1rem"}},X={key:0,style:{"padding-left":".2rem",gap:"1rem"},class:"flex row"},ee=["for"],ae=["id","name","value","disabled","onInput"],te=["onClick"],le={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1rem"}},se=["onClick"],ne=["href"],ie={class:"text-bold flex justify-between no-wrap",style:{"font-size":"1rem"}},oe={class:"flex column q-px-sm",style:{gap:".3rem"}},re=(0,l.Uk)(" off "),de=(0,l.Uk)(" on "),ce=K((()=>(0,l._)("span",{style:{"white-space":"nowrap"}},[(0,l._)("strong",null,"tip presets")],-1))),ue={key:0,class:"flex row no-wrap items-center",style:{gap:"2rem"}},me={key:1},pe=K((()=>(0,l._)("span",{style:{"white-space":"nowrap"}},[(0,l._)("strong",null,"one click tip")],-1))),ye={style:{"font-size":".9rem"}},he=(0,l.Uk)("note: you will need a webln enabled wallet like Alby to use this feature, and setting a budget in your webln wallet for astral will give you a true one click experience. this will authorize a tip of a set default amount to the author of a note with one click of the "),ge=(0,l.Uk)(" lightning tip button. the "),fe=(0,l.Uk)(" drop down button to the left will take you through the normal lightning tip pay flow."),be={key:0,class:"flex row no-wrap items-center",style:{gap:"2rem"}},we=(0,l.Uk)(" off "),ke=(0,l.Uk)(" on ");function ve(e,a,t,i,o,r){const d=(0,l.up)("q-btn"),c=(0,l.up)("BaseSelect"),u=(0,l.up)("q-toggle"),m=(0,l.up)("q-input"),p=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",{style:{padding:".2rem .5rem 1rem"},onClick:a[7]||(a[7]=(...e)=>r.closeSelects&&r.closeSelects(...e))},[Object.keys(o.preferences).length?((0,l.wg)(),(0,l.iD)("div",Q,[o.editingPreferences?((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)(d,{label:"save",color:"primary",outline:"",size:"sm",onClick:r.savePreferences},null,8,["onClick"]),(0,l.Wm)(d,{label:"cancel",color:"negative",outline:"",size:"sm",onClick:a[0]||(a[0]=e=>r.cancel("preferences"))})])):(0,l.kq)("",!0),(0,l._)("div",Y,[(0,l.Uk)((0,s.zw)(e.$t("preferences"))+" ",1),(0,l._)("div",E,[o.editingPreferences?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:0,label:"edit",color:"primary",outline:"",size:"sm",onClick:a[1]||(a[1]=e=>o.editingPreferences=!0)}))])]),(0,l._)("div",G,[(0,l._)("div",J,(0,s.zw)(e.$t("colors")),1),o.preferences.color?((0,l.wg)(),(0,l.iD)("div",X,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(o.preferences.color),((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a,class:"flex column items-center"},[(0,l._)("label",{for:e},(0,s.zw)(e),9,ee),(0,l._)("input",{type:"color",id:e,name:e,value:o.preferences.color[e],disabled:!o.editingPreferences,onInput:a=>r.updateColor(a.target.value,e)},null,40,ae)])))),128)),(0,l.Wm)(c,{"allow-selection":o.editingPreferences,selecting:o.choosingTheme,style:{width:"200px"},onToggle:a[2]||(a[2]=e=>o.choosingTheme=!o.choosingTheme)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)("choose a theme..."),1)])),"list-items":(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(o.themes),((e,a)=>((0,l.wg)(),(0,l.iD)("li",{key:a,onClick:(0,n.iM)((a=>r.updateTheme(o.themes[e])),["stop"])},[(0,l._)("span",null,(0,s.zw)(e),1)],8,te)))),128))])),_:1},8,["allow-selection","selecting"])])):(0,l.kq)("",!0),(0,l._)("div",le,(0,s.zw)(e.$t("font")),1),o.preferences.font?((0,l.wg)(),(0,l.j4)(c,{key:1,"allow-selection":o.editingPreferences,selecting:o.choosingFont,style:{width:"200px"},onToggle:a[3]||(a[3]=e=>o.choosingFont=!o.choosingFont)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.preferences.font),1)])),"list-items":(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.fonts,((e,a)=>((0,l.wg)(),(0,l.iD)("li",{key:a,class:"font-item",onClick:(0,n.iM)((a=>r.updateFont(e)),["stop"])},[(0,l._)("link",{href:`https://fonts.googleapis.com/css2?family=${r.googleFontsName(e)}`,rel:"stylesheet"},null,8,ne),(0,l._)("span",{style:(0,s.j5)(`font-family: '${e}';`)},(0,s.zw)(e),5)],8,se)))),128))])),_:1},8,["allow-selection","selecting"])):(0,l.kq)("",!0),(0,l._)("div",ie,(0,s.zw)(e.$t("lightningTips")),1),(0,l._)("div",oe,[(0,l._)("div",null,[re,(0,l.Wm)(u,{modelValue:o.preferences.lightningTips.enabled,"onUpdate:modelValue":a[4]||(a[4]=e=>o.preferences.lightningTips.enabled=e),disable:!o.editingPreferences,color:"accent",size:"sm"},null,8,["modelValue","disable"]),de]),ce,o.preferences.lightningTips.enabled?((0,l.wg)(),(0,l.iD)("div",ue,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.preferences.lightningTips.presets,((e,a)=>((0,l.wg)(),(0,l.j4)(m,{key:a,modelValue:o.preferences.lightningTips.presets[a],"onUpdate:modelValue":e=>o.preferences.lightningTips.presets[a]=e,type:"number",label:"preset "+(a+1),disable:!o.editingPreferences,dense:"",filled:"",suffix:"sats"},null,8,["modelValue","onUpdate:modelValue","label","disable"])))),128))])):(0,l.kq)("",!0),o.hasWebLn?((0,l.wg)(),(0,l.iD)("div",me,[pe,(0,l._)("div",ye,[he,(0,l.Wm)(p,{name:"bolt",style:{"font-size":"1.2rem"}}),ge,(0,l.Wm)(p,{name:"arrow_drop_down",style:{"font-size":"1.2rem"}}),fe]),o.preferences.lightningTips.enabled?((0,l.wg)(),(0,l.iD)("div",be,[(0,l._)("div",null,[we,(0,l.Wm)(u,{modelValue:o.preferences.lightningTips.oneClick.enabled,"onUpdate:modelValue":a[5]||(a[5]=e=>o.preferences.lightningTips.oneClick.enabled=e),disable:!o.editingPreferences,color:"accent",size:"sm"},null,8,["modelValue","disable"]),ke]),o.preferences.lightningTips.oneClick.enabled?((0,l.wg)(),(0,l.j4)(m,{key:0,modelValue:o.preferences.lightningTips.oneClick.amount,"onUpdate:modelValue":a[6]||(a[6]=e=>o.preferences.lightningTips.oneClick.amount=e),type:"number",label:"webln default tip amount",disable:!o.editingPreferences,dense:"",filled:"",suffix:"sats",style:{width:"10rem"}},null,8,["modelValue","disable"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0)])}t(18964);var Se=t(57674),Ce=t(16842);const xe={name:"Settings",emits:["update-font"],components:{BaseSelect:Ce.Z},data(){return{editingPreferences:!1,choosingFont:!1,choosingTheme:!1,preferences:{},hasJustSharedRelay:!1,hasWebLn:!1,themes:{astral:{primary:"#d671ea",secondary:"#5af2e0",accent:"#ecc865",background:"#1f1f1f"},mono:{primary:"#ffffff",secondary:"#aaaaaa",accent:"#777777",background:"#1f1f1f"},"zen lisa frank":{primary:"#14c5d2",secondary:"#9c45f2",accent:"#f943c9",background:"#c7c7c7"},nostrich:{primary:"#ad09c3",secondary:"#57198a",accent:"#9c45f2",background:"#fbf5ff"},dusk:{primary:"#ff5100",secondary:"#b86bff",accent:"#8373ff",background:"#000082"},camo:{primary:"#67983e",secondary:"#686512",accent:"#030c06",background:"#c5c7b2"},warm:{primary:"#f07575",secondary:"#ffb042",accent:"#ead04d",background:"#756168"},cool:{primary:"#83eefc",secondary:"#42a4ff",accent:"#a27aff",background:"#4a4d59"},southwest:{primary:"#719f9f",secondary:"#d27014",accent:"#994a00",background:"#e8d9b0"},dracula:{primary:"#50fa7b",secondary:"#8be9fd",accent:"#6272a4",background:"#282a36"},poimandres:{primary:"#5de4c7",secondary:"#5fa3b4",accent:"#acd7ff",background:"#1c1e28"}},fonts:["Roboto","Open Sans","Noto Sans JP","Montserrat","Lato","Poppins","Roboto Condensed","Source Sans Pro","Oswald","Roboto Mono","Raleway","Inter","Noto Sans","Ubuntu","Nunito","Roboto Slab","Nunito Sans","Playfair Display","Merriweather","PT Sans","Rubik","Noto Sans KR","Mukta","Lora","Kanit","Work Sans","Fira Sans","Barlow","Noto Sans TC","Nanum Gothic","Mulish","Quicksand","Titillium Web","PT Serif","Hind Siliguri","Heebo","Libre Franklin","DM Sans","Noto Serif","IBM Plex Sans","Karla","Josefin Sans","Arimo","Oxygen","Dosis","Inconsolata","Libre Baskerville","Anton","Manrope","Cairo","PT Sans Narrow","Secular One","Signika Negative","Source Serif Pro","Bebas Neue","Bitter","Cabin","Dancing Script","Abel","Hind","Barlow Condensed","Source Code Pro","Prompt","EB Garamond","Lobster","Varela Round","Comfortaa","Exo 2","Fjalla One","Pacifico","Crimson Text","Noto Sans SC","Noto Serif JP","Slabo 27px","Maven Pro","Teko","Asap","Overpass","Archivo","Caveat","Arvo","Jost","Merriweather Sans","Shadows Into Light","Abril Fatface","Assistant","Public Sans","M PLUS Rounded 1c","Rajdhani","Tajawal","Space Grotesk","Cormorant Garamond","Yanone Kaffeesatz","Saira Condensed","Catamaran","Questrial","Hind Madurai","Indie Flower","Fira Sans Condensed","IBM Plex Serif","Noto Sans HK","Alfa Slab One","Barlow Semi Condensed","Zilla Slab","Red Hat Display","IBM Plex Mono","M PLUS 1p","Play","Exo","Patrick Hand","Nanum Myeongjo","Domine","Signika","Chakra Petch","Satisfy","Permanent Marker","Acme","Fredoka One","Archivo Narrow","Sarabun","Bree Serif","Amatic SC","Noto Sans Arabic","Alegreya Sans","Righteous","Russo One","Alegreya","Vollkorn","Didact Gothic","ABeeZee","Almarai","Archivo Black","Cinzel","Baloo 2","Encode Sans","Kalam","Frank Ruhl Libre","Changa","Tinos","Yantramanav","DM Serif Display","Noto Serif TC","Asap Condensed","Amiri","Crete Round","Ubuntu Condensed","Lobster Two","Martel","Spectral","Noto Kufi Arabic","Cormorant","Courgette","Patua One","Passion One","Alata","Space Mono","Great Vibes","Cardo","Prata","Rokkitt","Sora","Fira Sans Extra Condensed","Ropa Sans","Noticia Text","Francois One","Old Standard TT","Michroma","IBM Plex Sans Arabic","PT Sans Caption","Montserrat Alternates","Orbitron","Kaushan Script","Saira","Faustina","Concert One","Antic Slab","Noto Sans Display","Yellowtail","Unna","Chivo","Marcellus","Gelasio","Covered By Your Grace","Gothic A1","Crimson Pro","Sawarabi Mincho","Urbanist","Carter One","Cookie","Gloria Hallelujah","Pathway Gothic One","Mali","Rubik Mono One","Lexend Deca","Press Start 2P","News Cycle","Sacramento","Quattrocento Sans","Philosopher"]}},mounted(){this.clonePreferences(),this.hasWebLn=window.webln},methods:{clonePreferences(){this.preferences=JSON.parse(JSON.stringify(this.$store.state.config.preferences))},savePreferences(){this.$store.commit("setConfig",{key:"preferences",value:this.preferences}),this.editingPreferences=!1},updateColor(e,a){(0,Se.Z)(a,e),this.preferences.color[a]=e,"background"===a&&this.$q.dark.set("dark"===this.lightOrDark(e))},updateTheme(e){for(let a of Object.keys(e))this.updateColor(e[a],a)},updateFont(e){this.preferences.font=e,this.$emit("update-font",e)},cancel(e){if("preferences"!==e);else{this.editingPreferences=!1,this.clonePreferences();for(let[e,a]of Object.entries(this.preferences.color))this.updateColor(a,e);this.updateFont(this.preferences.font)}},lightOrDark(e){var a,t,l,s;return e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),a=e[1],t=e[2],l=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),a=e>>16,t=e>>8&255,l=255&e),s=Math.sqrt(a*a*.299+t*t*.587+l*l*.114),s>127.5?"light":"dark"},googleFontsName(e){try{return e.replace(" ","+")}catch(a){console.log("error for font ",e)}},closeSelects(e){this.choosingFont=!1,this.choosingTheme=!1}}};var Pe=t(11639),Re=t(24455),_e=t(23175),Te=t(66611),qe=t(22857),Me=t(69984),Ue=t.n(Me);const Ae=(0,Pe.Z)(xe,[["render",ve],["__scopeId","data-v-7c4eea2f"]]),$e=Ae;Ue()(xe,"components",{QBtn:Re.Z,QToggle:_e.Z,QInput:Te.Z,QIcon:qe.Z});var Ve=t(31020),We=t(31262);const ze={title:"astral - settings",meta:{description:{name:"description",content:"Nostr and astral user configuration"},keywords:{name:"keywords",content:"nostr decentralized social media"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}}},De={name:"Settings",mixins:[Z.Z,(0,Ve.Z)(ze)],emits:["update-font"],components:{BaseSelectMultiple:B.Z,BaseInformation:I.Z,ThePreferences:$e},data(){return{keysDialog:!1,editingMetadata:!1,metadata:{},showLnAddr:!0,relays:{},editingRelays:!1,choosingFont:!1,choosingTheme:!1,newRelay:"",unsubscribe:null,hasJustSharedRelay:!1}},watch:{"$store.state.relays"(e,a){e!==a&&this.cloneRelays()}},computed:{optionalRelays(){let e=this.$store.state.optionalRelaysList.filter((e=>!(this.newRelay.length&&!e.toLowerCase().includes(this.newRelay.toLowerCase()))&&!this.relays[e]));return e},npubKey(){return this.$store.state.keys.pub?this.hexToBech32(this.$store.state.keys.pub,"npub"):null},nsecKey(){return this.$store.state.keys.priv?this.hexToBech32(this.$store.state.keys.priv,"nsec"):null},hasLnAddr(){return We.P6.isLightningAddress(this.metadata.lud06)||We.P6.isLnurl(this.metadata.lud06)&&this.lnurlToLnAddr(this.metadata.lud06)},isLnurl(){return We.P6.isLnurl(this.metadata.lud06)}},mounted(){this.$store.state.keys.pub||this.$router.push("/"),this.$store.state.keys.pub&&this.$route.params.initUser&&(0,l.Y3)((()=>{setTimeout((()=>{this.keysDialog=!0}),1e3)})),this.unsubscribe=this.$store.subscribe(((e,a)=>{switch(e.type){case"addProfileToCache":if(e.payload.pubkey!==a.keys.pub)return;(0,l.Y3)((()=>{setTimeout((()=>{this.cloneMetadata()}),1)}));break}})),this.cloneRelays()},beforeUnmount(){this.unsubscribe&&this.unsubscribe()},methods:{cloneMetadata(){if(this.metadata=Object.assign({},this.$store.state.profilesCache[this.$store.state.keys.pub]),this.metadata.lud06){let e=this.lnurlToLnAddr(this.metadata.lud06);e&&(this.metadata.lud06=e)}else this.metadata.lud16&&(this.metadata.lud06=this.metadata.lud16)},convertLud06(){We.P6.isLightningAddress(this.metadata.lud06)?this.metadata.lud06=this.lnAddrToLnurl(this.metadata.lud06):We.P6.isLnurl(this.metadata.lud06)&&this.lnurlToLnAddr(this.metadata.lud06)&&(this.metadata.lud06=this.lnurlToLnAddr(this.metadata.lud06)),this.showLnAddr=!this.showLnAddr},cloneRelays(){this.relays=Object.assign({},Object.keys(this.$store.state.relays).length?this.$store.state.relays:this.$store.state.defaultRelays)},async setMetadata(){if(this.metadata.created_at&&delete this.metadata.created_at,""===this.metadata.nip05&&(this.metadata.nip05=void 0),this.metadata.nip05&&await(0,N.x)(this.metadata.nip05)!==this.$store.state.keys.pub)this.$q.notify({message:"Failed to verify NIP05 identifier on server.",color:"warning"});else{if(this.metadata.lud06){if(We.P6.isLightningAddress(this.metadata.lud06))this.metadata.lud16=this.metadata.lud06,this.metadata.lud06=this.lnAddrToLnurl(this.metadata.lud16);else{let e=this.lnurlToLnAddr(this.metadata.lud06);e&&(this.metadata.lud16=e)}if(!We.P6.isLnurl(this.metadata.lud06))return void this.$q.notify({message:"Invalid lud06 identifier, must start with LNURL.",color:"warning"});if(this.metadata.lud16&&!We.P6.isLightningAddress(this.metadata.lud16))return void this.$q.notify({message:"Invalid lud16 identifier, must be a lightning address.",color:"warning"})}Object.keys(this.$store.state.relays).length||this.saveRelays(),this.$store.dispatch("setMetadata",this.metadata),this.editingMetadata=!1}},addRelay(){this.newRelay&&this.newRelay.length&&(this.relays[this.newRelay]={read:!0,write:!0}),this.newRelay=""},removeRelay(e){delete this.relays[e]},saveRelays(){Object.keys(this.relays).length?(this.$store.getters.canSignEventsAutomatically&&this.$store.commit("saveRelays",this.relays),this.editingRelays=!1):this.$q.dialog({title:"no relays saved!",message:"you must have at least one relay selected to save. please add a relay.",ok:{color:"accent"}}).onOk((()=>{}))},cancel(e){return"metadata"===e?(this.editingMetadata=!1,void this.cloneMetadata()):"relays"===e?(this.editingRelays=!1,void this.cloneRelays()):void 0},shareRelay(e){this.hasJustSharedRelay=!0,this.$store.dispatch("recommendRelay",e),setTimeout((()=>{this.hasJustSharedRelay=!1}),5e3)},async logout(){this.$q.dialog({title:"logout?",message:"this will not delete your local nostr database but will allow you to login as another user. continue?",cancel:{color:"accent"},ok:{color:"accent"}}).onOk((async()=>{O.Z.clear(),window.location.reload()}))},async hardReset(){this.$q.dialog({title:"delete all data?",message:"do you really want to delete all data from this device?",cancel:{color:"accent"},ok:{color:"accent"}}).onOk((async()=>{O.Z.clear(),await(0,F.UD)(),window.location.reload()}))},updateFont(e){this.$emit("update-font",e)}}};var Le=t(69885),je=t(8326),Oe=t(50926),Ne=t(13246),Ze=t(490),Fe=t(61123),Be=t(63190),Ie=t(87743),Ke=t(44458),Qe=t(11821),He=t(62146);const Ye=(0,Pe.Z)(De,[["render",j],["__scopeId","data-v-b1ed1000"]]),Ee=Ye;Ue()(De,"components",{QPage:Le.Z,QForm:je.Z,QBtn:Re.Z,QInput:Te.Z,QIcon:qe.Z,QSeparator:Oe.Z,QList:Ne.Z,QItem:Ze.Z,QToggle:_e.Z,QExpansionItem:Fe.Z,QCardSection:Be.Z,QDialog:Ie.Z,QCard:Ke.Z,QCardActions:Qe.Z}),Ue()(De,"directives",{ClosePopup:He.Z})}}]);